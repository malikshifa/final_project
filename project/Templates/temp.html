<!DOCTYPE html>

<html>
<head>
    {% load static %}
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Anomalies Detector | Free precision farming apps</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <meta name="description" content="Monitor your fields remotely and make reliable agricultural decisions with help from artificial intelligence. For free.">
    <meta name="Keywords" content="precision agriculture, agricultural decisions">
    <meta name="author" content="">
    <link rel="stylesheet" type="text/css" href="{% static 'css/map.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontastic.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.default.css' %}" id="theme-stylesheet">

    <link rel="icon" type="image/png" href="https://cdn.iconscout.com/icon/premium/png-256-thumb/crops-1-690992.png" >
    <link rel="icon" type="image/png" href="https://cdn.iconscout.com/icon/premium/png-256-thumb/crops-1-690992.png">
    <meta property="og:url" content="">
    <meta property="og:type" content="">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://onesoil.ai/img/opengraph/Opengraph-en.png">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <style>
        .side-navbar .sidenav-header  {
          background: #008d5c;
          padding: 0px;
        }

     .side-navbar li a:focus, .side-navbar li a:hover, .side-navbar li a
     {
        color:white;
        font-size:20px;
        padding-left:30px;
        border-bottom:1px solid white;

     }

     .leaflet-top .leaflet-control {
        margin-top: 50px;
    }

     .side-navbar
     {
        background-color:#008d5c;
     }

     .side-navbar li a:focus, .side-navbar li a:hover, .side-navbar li a[aria-expanded="true"]
     {
        background:#cab5b53d;
     }

    nav.navbar
    {
        background-color:white;
    }

    h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,ss.h6 {
      color: green;
    }
    .header__wrapper {
        max-width: 1160px;
        padding: .2rem 1.25rem .2rem;
        height: 90px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-around;
        transition: height 160ms ease-in-out;
    }
    .side-navbar .sidenav-header {
      background: #white !important;
      padding: 14px;
      margin-bottom: 10px;
    }
    </style>
</head>

<noscript>
      <iframe src="http://www.googletagmanager.com/ns.html?id=GTM-TDQCHFC" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TDQCHFC');
    </script>
<body>
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDQCHFC" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDQCHFC" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <nav class="side-navbar">
      <div class="side-navbar-wrapper">
        <!-- Sidebar Header    -->
        <div class="sidenav-header d-flex align-items-center justify-content-center">
          <!-- User Info-->
          <div class="sidenav-header-inner text-center">
            <span style="color:white">Hello</span><h2 class="h5" style="color:white">{{ request.user }}</h2>
          </div>
          <!-- Small Brand information, appears on minimized sidebar-->
          <div class="sidenav-header-logo"><a href="index.html" class="brand-small text-center"> <strong>B</strong><strong class="text-primary">D</strong></a></div>
        </div>
        <!-- Sidebar Navigation Menus-->
        <div class="main-menu">
          <ul id="side-main-menu" class="side-menu list-unstyled">
            <li><a href="{% url 'map' %}">Add Shapes</a></li>
            <li><a href="{% url 'getmapdata' %}">View Shapes</a></li>

          </ul>
        </div>

      </div>
    </nav>
    <div class="page">
        <header class="header">
        <nav class="navbar">
          <div class="l-wrapper">
      <div class="header" id="header">
        <div class="header__wrapper">
          <div class="header__logo"><a href="index.html" style="display:flex;"><img src="{% static 'images/crops.png' %}" style="margin-left:-45px;padding-right:8px;"><h3>Anomalies Detector</h3></a></div>
          <div class="header__menu c-navigation"><a class="c-navigation__link" href="index.html" title="The Apps" target="_self"></a><a class="c-navigation__link" href="devices.html" title="Devices" target="_self"></a><a class="c-navigation__link" href="technologies.html" title="Technology" target="_self"></a><a class="c-navigation__link" href="https://b2b.onesoil.ai/" title="For Businesses" target="_blank"> </a><a class="c-navigation__link" href="team.html" title="Team" target="_self"></a><a class="c-navigation__link" href="https://help.onesoil.ai/" title="Support" target="_blank"></a><a class="c-navigation__link" href="https://blog.onesoil.ai/en/?utm_source=website" title="Blog" target="_blank"></a>
          </div>
            <span style="color:black;background-color:white"></span>
          <div class="header__login"><a class="button" href="{% url 'homepage' %}" data-event=""><span>logout</span></a></div>
          <div class="header__icon js-menu-toggle">
            <div class="o-burger-icon">
              <div class="o-burger-icon__open"><svg width="36" height="36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M7.5 9h21a1.5 1.5 0 0 1 0 3h-21a1.5 1.5 0 0 1 0-3zm0 7h21a1.5 1.5 0 0 1 0 3h-21a1.5 1.5 0 0 1 0-3zm0 7h16a1.5 1.5 0 0 1 0 3h-16a1.5 1.5 0 0 1 0-3z" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><use fill="#27AE60" fill-rule="nonzero" xlink:href="#a"/><g mask="url(#b)" fill="#27AE60" fill-rule="nonzero"><path d="M0 0h50v50H0z"/></g></g></svg></div>
              <div class="o-burger-icon__close"><img src="https://onesoil.ai/img/icons/icon-menu--close.svg" alt=""></div>
            </div>
          </div>
        </div>
      </div>
    </div>
        <div class="l-mobile-menu">
          <div class="l-mobile-menu__top c-navigation c-navigation--mobile"><a class="c-navigation__link -is-active" href="index.html" title="About" target="">About</a><a class="c-navigation__link" href="applications.html" title="The Apps" target="">The Apps</a><a class="c-navigation__link" href="devices.html" title="Devices" target="">Devices</a><a class="c-navigation__link" href="technologies.html" title="Technology" target="">Technology</a><a class="c-navigation__link" href="https://b2b.onesoil.ai/" title="For Businesses" target="_blank">For Businesses</a><a class="c-navigation__link" href="team.html" title="Team" target="">Team</a><a class="c-navigation__link" href="https://help.onesoil.ai/" title="Support" target="_blank">Support</a><a class="c-navigation__link" href="https://blog.onesoil.ai/en/?utm_source=website" title="Blog" target="_blank">Blog</a>
          </div>
          <div class="l-mobile-menu__bottom c-apps c-apps--margin-top u-separator-left c-apps--horizontal">
            <div class="c-apps__block"><span class="c-apps__title u-mobile-hidden">Open in the browser</span><a class="button button--fullwidth" href="https://app.onesoil.ai/?utm_source=onesoilwebsite&amp;utm_medium=header&amp;utm_content=en" target="_blank" data-event=""><img src="https://onesoil.ai/img/icons/user-icon.svg" alt=""><span>Sign in</span></a>
            </div>
            <div class="c-apps__block"><span class="c-apps__title u-mobile-hidden">Anomalies Detector for mobile devices</span>
              <div class="footer__stores c-apps__container--white"><a class="footer__store o-icon o-icon--center o-icon--store o-icon--vertical" href="https://play.google.com/store/apps/details?id=io.onesoil.scouting&amp;referrer=utm_source=website&amp;utm_medium=main_page&amp;anid=admob" target="_blank">
                  <div class="o-icon__state o-icon__state--hover">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app--hover.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app-title--hover.svg" alt=""><span>Download</span></div>
                  </div>
                  <div class="o-icon__state o-icon__state--normal">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app-title.svg" alt=""><span>Download</span></div>
                  </div></a><a class="footer__store o-icon o-icon--center o-icon--store o-icon--vertical" href="https://apps.apple.com/app/apple-store/id1458134040?mt=8" target="_blank">
                  <div class="o-icon__state o-icon__state--normal">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app-title.svg" alt=""><span>Download</span></div>
                  </div></a></div>
            </div>
          </div>
        </div>
        </nav>
      </header>
    <!--header ends-->
     <div id="map" style="width: 100%; height: 500px;margin-top:110px">{% csrf_token %}</div>
<div>
    <input class="button" type="submit" value="Save Shape" style="margin:20px" placeholder="Save Shape" onclick="store()" >
<!--<button type="submit" value="save" placeholder="save" onclick="check()" >save</button>-->
</div>
    <br>
    <br>
    <br><br>

    <!--footer-->
    <div class="footer" >
        <div class="footer__wrapper dd" >

          <div class="footer__row">
            <div class="footer__column c-socials" style="width: 0%;">
              <div class="c-socials__row">  </div>
              <div class="c-socials__row">   </div>
              <div class="c-socials__row"> </div>

            </div>

            <div class="footer__column c-socials">
              <div class="c-socials__row">  <i class="fa fa-map-marker" aria-hidden="false"></i> &nbsp;&nbsp;&nbsp;&nbsp; Comsats University,<br>&nbsp;&nbsp;&nbsp;&nbsp; Lahore,PK </div>
              <div class="c-socials__row">  <i class="fa fa-phone" aria-hidden="false"></i> &nbsp;&nbsp;&nbsp;&nbsp; 091-091091-09 </div>
              <div class="c-socials__row">  <i class="fa fa-envelope" aria-hidden="false"></i> &nbsp;&nbsp;&nbsp;&nbsp; <a>fatima@naqvi.com</a></div>

            </div>




            <div class="footer__column "><span class="u-vertical-center"></span><b>About</b>

              <div class="c-socials__row"> Lorem disspost bore emet,<br>Lorem disspost bore emet,<br>Lorem disspost bore emet,</div>


              <div class="c-socials__row"><a class="o-icon" href="https://twitter.com/onesoilplatform" target="_blank">
                <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/twitter-icon--hover.svg"></div>
                <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/twitter-icon.svg"></div></a><a class="o-icon" href="https://www.instagram.com/onesoil.ai/" target="_blank">
                <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/instagram-icon--hover.svg"></div>
                <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/instagram-icon.svg"></div></a><a class="o-icon" href="https://www.facebook.com/onesoilplatform/" target="_blank">
                <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/facebook-icon--hover.svg"></div>
                <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/facebook-icon.svg"></div></a><a class="o-icon" href="https://www.linkedin.com/company/onesoil/" target="_blank">
                <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/linked-hover.svg"></div>
                <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/linked-def.svg"></div></a><a class="o-icon" href="https://www.youtube.com/channel/UCRZaRW_DZs_d3XTxg9axRIA" target="_blank">
                <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/youtube-icon--hover.svg"></div>
                <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/youtube-icon.svg"></div></a></div>

            </div>
          </div>
        </div>
      </div>
      <div class="footer footer--mobile">
        <div class="footer__wrapper">
          <div class="footer__row">
            <div class="footer__column footer__apps"><a class="button button--fullwidth" href="https://app.onesoil.ai/?utm_source=onesoilwebsite&amp;utm_medium=footer&amp;utm_content=en" target="_blank" data-event=""><img src="https://onesoil.ai/img/icons/user-icon.svg" alt=""><span>Sign in</span></a><br><br>
              <div class="footer__stores"><a class="footer__store o-icon o-icon--center o-icon--store o-icon--vertical" href="https://play.google.com/store/apps/details?id=io.onesoil.scouting&amp;referrer=utm_source=website&amp;utm_medium=main_page&amp;anid=admob" target="_blank">
                  <div class="o-icon__state o-icon__state--hover">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app--hover.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app-title--hover.svg" alt=""><span>Download</span></div>
                  </div>
                  <div class="o-icon__state o-icon__state--normal">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/android-app-title.svg" alt=""><span>Download</span></div>
                  </div></a><a class="footer__store o-icon o-icon--center o-icon--store o-icon--vertical" href="https://apps.apple.com/app/apple-store/id1458134040?mt=8" target="_blank">
                  <div class="o-icon__state o-icon__state--hover">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app--hover.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app-title--hover.svg" alt=""><span>Download</span></div>
                  </div>
                  <div class="o-icon__state o-icon__state--normal">
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app.svg" alt=""></div>
                    <div class="o-icon__column"><img src="https://onesoil.ai/img/icons/apple-app-title.svg" alt=""><span>Download</span></div>
                  </div></a></div>
            </div>
          </div>
          <div class="footer__row u-mobile-center">
            <div class="footer__column"><span class="semibold">Contact Us</span><a class="o-link o-link--medium" href="mailto:hello@onesoil.ai">hello@Anomalies Detector.ai</a></div>
          </div>
          <div class="footer__row">
            <div class="footer__column c-socials">
              <div class="c-socials__row"><a class="o-icon o-icon--inline o-icon--colored" href="https://blog.onesoil.ai/en/?utm_source1=website"><svg width="26" height="22" xmlns="http://www.w3.org/2000/svg"><path d="M24.438 4.722L21.325 1.61l.681-.686a2.202 2.202 0 0 1 3.125 3.102l-.693.697zm-.61.615l-6.43 6.475-4.412 1.164 1.288-4.265 6.44-6.487 3.114 3.113zm-5.289-4.073l-1.692 1.769A18.32 18.32 0 0 0 15.666 3H7.334c-1.777 0-2.565.16-3.321.565a3.453 3.453 0 0 0-1.448 1.448C2.16 5.769 2 6.557 2 8.334v2.332c0 1.777.16 2.565.565 3.321.337.63.818 1.111 1.448 1.448.415.222.785.35 1.314.438L7 16.15v.734L7.816 16h1.43L9 16.644 11.351 16h4.315c1.777 0 2.565-.16 3.321-.565a3.453 3.453 0 0 0 1.448-1.448c.378-.706.543-1.44.563-2.98L23 8.916v1.75c0 2.246-.278 3.288-.801 4.266a5.452 5.452 0 0 1-2.268 2.268c-.978.523-2.02.801-4.265.801H8.692L5 22v-4.154a5.934 5.934 0 0 1-1.93-.647A5.452 5.452 0 0 1 .8 14.93c-.522-.977-.8-2.02-.8-4.264V8.334C0 6.09.278 5.047.801 4.07A5.452 5.452 0 0 1 3.07 1.801C4.047 1.278 5.09 1 7.334 1h8.332c1.277 0 2.165.09 2.873.264zM6 7h5v2H6V7zm0 3h5v2H6v-2z" fill="#707070"/></svg><span class="o-icon__title semibold">Blog</span></a></div>
              <div class="c-socials__row"><a class="o-icon" href="https://twitter.com/onesoilplatform" target="_blank">
                  <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/twitter-icon--hover.svg"></div>
                  <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/twitter-icon.svg"></div></a><a class="o-icon" href="https://www.instagram.com/onesoil.ai/" target="_blank">
                  <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/instagram-icon--hover.svg"></div>
                  <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/instagram-icon.svg"></div></a><a class="o-icon" href="https://www.facebook.com/onesoilplatform/" target="_blank">
                  <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/facebook-icon--hover.svg"></div>
                  <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/facebook-icon.svg"></div></a><a class="o-icon" href="https://www.linkedin.com/company/onesoil/" target="_blank">
                  <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/linked-hover.svg"></div>
                  <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/linked-def.svg"></div></a><a class="o-icon" href="https://www.youtube.com/channel/UCRZaRW_DZs_d3XTxg9axRIA" target="_blank">
                  <div class="o-icon__state o-icon__state--hover"><img src="https://onesoil.ai/img/icons/youtube-icon--hover.svg"></div>
                  <div class="o-icon__state o-icon__state--normal"><img src="https://onesoil.ai/img/icons/youtube-icon.svg"></div></a></div>
            </div>
            <div class="footer__column footer__credits">
              <div><a class="o-icon o-icon--inline o-rightby" href="https://right.by/" target="_blank"><svg width="23" height="19" xmlns="http://www.w3.org/2000/svg"><path d="M7.642 8.808l1.664-2.56-1.664-2.56H3.603v5.12h4.039zm2.538 2.753l3.507 5.397-3 2.042-4.227-6.504H3.603v5.47H0V0h9.573l4.06 6.248-3.453 5.313zm6.295-2.866l3-2.042L23 12.078l-3.525 5.425-3-2.042 2.198-3.383-2.198-3.383z" fill="#231F20"/></svg><span class="o-icon__title">Design</span></a></div>
              <div>
                <div class="o-lang-switcher js-lang-switcher">
                  <div class="o-lang-switcher__before"><img src="https://onesoil.ai/img/icons/langs/english.svg"></div>
                  <select class="o-lang-switcher__select">
                    <option class="o-lang-switcher__option" selected value="/en/">English</option>
                    <option class="o-lang-switcher__option" value="/ru/"> Русский</option>
                    <option class="o-lang-switcher__option" value="/fr/"> Français</option>
                    <option class="o-lang-switcher__option" value="/es/"> Español</option>
                    <option class="o-lang-switcher__option" value="/pt/"> Português</option>
                  </select>
                  <div class="o-lang-switcher__after"><img src="https://onesoil.ai/img/icons/arrow-down.svg"></div>
                </div>
              </div>
              <div><span class="u-vertical-center"><span class="muted">© 2018-2021 Anomalies Detector</span></span></div>
            </div>
          </div>
        </div>
      </div>
      <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;signed_in=true&amp;key=AIzaSyAJz6HkWKlJ9DS8e6vtBlD3Vjn2_uzBXZE"></script>
      <script src="https://onesoil.ai/js/main.js?ver=1.0.7"></script>
    </div>

    <script src="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.js">
    </script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js">
    </script>


    <script type="text/javascript"> window.CSRF_TOKEN = "{{ csrf_token }}"; </script>
    <script>

    var shapes = [];              //save coordinates of shape
    var type;                       // save type of the shape drawn by user

//var valsss = JSON.parse("{{data}}");
//console.log(valsss)

var map = L.map('map').setView([-41.2858, 174.78682], 14);
mapLink =
    '<a href="http://openstreetmap.org">OpenStreetMap</a>';
L.tileLayer(
    'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; ' + mapLink + ' Contributors',
    maxZoom: 18,
    }).addTo(map);

var LeafIcon = L.Icon.extend({
    options: {
        shadowUrl:
            'http://leafletjs.com/docs/images/leaf-shadow.png',
        iconSize:     [38, 95],
        shadowSize:   [50, 64],
        iconAnchor:   [22, 94],
        shadowAnchor: [4, 62],
        popupAnchor:  [-3, -76]
    }
});

var greenIcon = new LeafIcon({
    iconUrl: 'http://leafletjs.com/docs/images/leaf-green.png'
    });

var drawnItems = new L.FeatureGroup();
map.addLayer(drawnItems);

var drawControl = new L.Control.Draw({
    position: 'topright',
    draw: {
        polygon: {
            shapeOptions: {
                color: 'purple'
            },
            allowIntersection: false,
            drawError: {
                color: 'orange',
                timeout: 1000
            },
            showArea: true,
            metric: false,
            repeatMode: true
        },
        polyline: {
            shapeOptions: {
                color: 'red'
            },
        },
        rect: {
            shapeOptions: {
                color: 'green'
            },
        },
        circle: {
            shapeOptions: {
                color: 'steelblue'
            },
        },
        marker: {
            icon: greenIcon
        },
    },
    edit: {
        featureGroup: drawnItems
    }
});
map.addControl(drawControl);

map.on('draw:created', function (e) {
    var type = e.layerType,
        layer = e.layer;

    if (type === 'marker') {
        layer.bindPopup('A popup!');
    }

    drawnItems.addLayer(layer);
});

//var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];

//var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
//map.fitBounds(polygon.getBounds());


function showShape()
{
    //console.log("showshape button");
    //var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];
    //var p = {{ lsitC | safe }};
    //console.log(p);
    //var polygon = L.polygon(p, {color: 'red'}).addTo(map);
    //map.fitBounds(polygon.getBounds());

}

var drawnItems = new L.FeatureGroup();
map.addLayer(drawnItems);

map.on('draw:created', function (e) {

    type = e.layerType,
        layer = e.layer;

    drawnItems.addLayer(layer);

    var shapes = getShapes(drawnItems);

    console.log(shapes);
    console.log('--------------check-------------------------------');
    console.log(type);



    // Process them any way you want and save to DB
    //...

});
var getShapes = function(drawnItems) {


    drawnItems.eachLayer(function(layer) {

        // Note: Rectangle extends Polygon. Polygon extends Polyline.
        // Therefore, all of them are instances of Polyline
        if (layer instanceof L.Polyline) {
            shapes.push(layer.getLatLngs());
        }

        if (layer instanceof L.Circle) {
            shapes.push([layer.getLatLng()])
        }

        if (layer instanceof L.Marker) {
            shapes.push([layer.getLatLng()]);
        }

    });
    console.log("shapes");
    return shapes;

};


function store()
{
    console.log("check-1");
    if(shapes != null && shapes.length != 0)
    {
        var stringpoint = JSON.stringify(shapes);

        $.ajax({
        type: 'POST',
        url: "/mapdata/",
        data: {csrfmiddlewaretoken: window.CSRF_TOKEN,
                stringpoint: stringpoint,
                type:type,
                datatype:'JSON',
                data:'JSON',
                 },
        success: function() {
            alert("Successfully saved shape to the database!");
        }

        //var vals = JSON.parse(responseString)
    });
    }
    else
    {
        alert("There is no shape drawn on the map");
    }
}

</script>
    <!-- JavaScript files-->

    <!--<script src="{% static 'js/map.js' %}"></script>-->
</body>
</html>